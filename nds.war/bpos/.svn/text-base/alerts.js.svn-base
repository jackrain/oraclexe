var Alerts={background:null,message:null,messageArray:new Array(),fadeTimer:0,OPACITY:51,STEPS:3,bgFadeIn:function(a,b,c){var d=Alerts.background;Element.changeOpacity(d,a)},bgFadeOut:function(a,b,c){var d=Alerts.background;if(d){d.parentNode.removeChild(d);setSelectVisibility("visible",Alerts.message);Alerts.background=null}},createWrapper:function(k,e,l){var h=document.createElement("div");var m=document.createElement("div");var j=document.createElement("table");if(!l){l=new Object()}var c=l.maxButton;var b=l.maxURL;h.className="pop-up-outer";if(l.queryindex!=undefined){h.id="pop-up-outer_"+l.queryindex}h.align="center";m.className="pop-up-inner";j.className="pop-up-header";j.border=0;j.width="100%";j.cellSpacing=0;j.cellPadding=0;j.insertRow(0);var i=j.rows[0];i.insertCell(0);i.insertCell(1);var g=i.cells[0];var f=i.cells[1];g.className="pop-up-title";g.id="pop-up-title-"+(Alerts.messageArray.length);g.width="99%";if(e){g.innerHTML=e}var a=l.closeButton;if(a==null||a==undefined){a=true}f.className="pop-up-close";f.width="1%";if(a){f.innerHTML='<a href="javascript:void(0)" title=\'Close\' onclick="Alerts.killAlert(this)"><img border="0" src="/html/nds/images/close.gif"/></a>'}if(c){g.width="98%";i.insertCell(1);var d=i.cells[1];f.id="pop-up-close-x";d.className="pop-up-close";d.width="1%";d.innerHTML="<a href=\"javascript:void(0)\" title='Single window' onclick=\"Alerts.killAlert(this);popup_window('"+b+'\',\'_blank\');"><img border="0" src="/html/nds/images/maxbutton.gif"/></a>'}m.appendChild(j);m.appendChild(k);h.appendChild(m);k.wrapper=h;return h},killAlert:function(e){if(e){var f=e;while(f.parentNode){if(f.className&&f.className.match("pop-up-outer")){break}f=f.parentNode}var a=document.getElementsByTagName("body")[0];var b=f.options;var c=null;var d=false;if(b.queryindex!=undefined){f=$("pop-up-outer_"+b.queryindex)}Alerts.remove(f);a.removeChild(f);if(Alerts.messageArray.length>0){Alerts.message=Alerts.messageArray[Alerts.messageArray.length-1];Alerts.message.style.zIndex=ZINDEX.ALERT+1;setSelectVisibility("visible",Alerts.message);c=f.background}else{Alerts.message=null;c=Alerts.background}if(c){Alerts.bgFadeOut(Alerts.OPACITY,Alerts.STEPS)}if(b&&b.onClose){b.onClose()}}},fireMessageBox:function(m){var g=document.body;if(!m){m=new Object()}var j=m.modal;var l=m.message;var f=m.height;var d=m.width;var h=m.noCenter;var i=m.title;var e=m.options;var k=document.createElement("div");k.align="left";var b=Alerts.createWrapper(k,i,m);b.style.position="absolute";b.style.top=0;b.style.left=0;b.style.zIndex=ZINDEX.ALERT+1;b.options=m;if(l){k.innerHTML=l}else{k.innerHTML='<div class="portlet-loading"></div>'}if(f){if(is_ie){k.style.height=f+"px"}else{k.style.minHeight=f+"px"}}if(d){b.style.width=d+"px"}if(!Alerts.background&&j){var a=document.createElement("div");a.id="alert-message";a.style.position="absolute";a.style.top="0";a.style.left="0";a.style.zIndex=ZINDEX.ALERT;Alerts.background=a;b.background=a;a.style.backgroundColor="#000000";Element.changeOpacity(a,0);g.appendChild(a);Alerts.bgFadeIn(Alerts.OPACITY,Alerts.STEPS)}setSelectVisibility("hidden");if(Alerts.messageArray.length>0){var c=Alerts.messageArray[Alerts.messageArray.length-1];c.style.zIndex=ZINDEX.ALERT-1;setSelectVisibility("hidden",c)}setSelectVisibility("visibile",k);Alerts.message=k;Alerts.messageArray.push(b);Alerts.resize();Event.observe(window,"resize",Alerts.resize);if(h){Alerts.center()}else{Alerts.center(f,d)}Event.observe(window,"resize",Alerts.center);g.appendChild(b);window.focus();return k},popupIframe:function(b,a){if(a.maxButton){a.maxURL=b}var f=a.height;var e=a.width;var d=Alerts.fireMessageBox(a);var c=document.createElement("iframe");c.className="popup-iframe";c.id="popup-iframe-"+(Alerts.messageArray.length-1);d.height="";c.frameBorder=0;if(e){c.style.width="100%"}d.appendChild(c);c.src=b;if(!a.noCenter){Alerts.center(f,e)}return d},center:function(b,c,f){if(Alerts.message){var d=Alerts.message.wrapper;var a=document.getElementsByTagName("body")[0];var h=d.options.centerMode;if(!h){if(b&&c){h=d.options.centerMode="xy"}else{if(b&&!c){h=d.options.centerMode="y"}else{if(!b&&c){h=d.options.centerMode="x"}else{if(b&&c&&f){h=d.options.centerMode="abs"}else{h=d.options.centerMode="none"}}}}}if(isNaN(c)){c=d.offsetWidth}if(isNaN(b)){b=d.offsetHeight}var g;var e;if(!is_safari){var g=(a.clientWidth-c)/2;var e=a.scrollTop+((a.clientHeight-b)/2)}else{var g=(a.offsetWidth-c)/2;var e=(a.offsetHeight-b)/2}if(h=="abs"){if(f){d.style.top=f+"px";d.style.left=g+"px"}return}if(h=="xy"||h=="y"){d.style.top=e+"px"}else{d.style.top=(a.scrollTop+10)+"px"}if(h=="xy"||h=="x"){d.style.left=g+"px"}else{d.style.left="20px"}}},resize:function(){if(Alerts.background){var c=Alerts.background;var a=document.getElementsByTagName("body")[0];if(!is_safari){var d=a.scrollHeight;var b=a.clientHeight;c.style.height=(d>b?d:b)+"px";c.style.width="100%"}else{c.style.height=a.offsetHeight+"px";c.style.width=a.offsetWidth+"px"}}},resizeIframe:function(a){if(Alerts.message&&a){var b=Alerts.message.getElementsByTagName("iframe")[0];var c=document.getElementsByClassName("portlet-loading",Alerts.message);if(c.length>0){c[0].parentNode.removeChild(c[0])}if(b){if(a.height){b.height=a.height}if(a.width){b.width=a.width}}}Alerts.resize()},remove:function(c){var a=Alerts.messageArray;for(var b=0;b<a.length;b++){if(a[b]==c){a.splice(b,1);break}}}};