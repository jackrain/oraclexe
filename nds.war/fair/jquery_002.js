/*
* Compressed by JSA(www.xidea.org)
*/
(function(_){_.fn.jcarousel=function($){return this.each(function(){new A(this,$)})};var $={vertical:false,start:1,offset:1,size:null,scroll:2,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null};_.jcarousel=function(C,E){this.options=_.extend({},$,E||{});this.locked=false;this.container=null;this.clip=null;this.list=null;this.buttonNext=null;this.buttonPrev=null;this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?"left":"top";if(C.nodeName=="UL"||C.nodeName=="OL"){this.list=_(C);this.container=this.list.parent();if(_.className.has(this.container[0].className,"jcarousel-clip")){if(!_.className.has(this.container[0].parentNode.className,"jcarousel-container"))this.container=this.container.wrap("<div></div>");this.container=this.container.parent()}else if(!_.className.has(this.container[0].className,"jcarousel-container"))this.container=this.list.wrap("<div></div>").parent();var G=C.className.split(" ");for(var H=0;H<G.length;H++)if(G[H].indexOf("jcarousel-skin")!=-1){this.list.removeClass(G[H]);this.container.addClass(G[H]);break}}else{this.container=_(C);this.list=_(C).children("ul,ol")}this.clip=this.list.parent();if(!this.clip.length||!_.className.has(this.clip[0].className,"jcarousel-clip"))this.clip=this.list.wrap("<div></div>").parent();this.buttonPrev=_(".jcarousel-prev",this.container);if(this.buttonPrev.size()==0&&this.options.buttonPrevHTML!=null)this.buttonPrev=this.clip.before(this.options.buttonPrevHTML).prev();this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=_(".jcarousel-next",this.container);if(this.buttonNext.size()==0&&this.options.buttonNextHTML!=null)this.buttonNext=this.clip.before(this.options.buttonNextHTML).prev();this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip"));this.list.addClass(this.className("jcarousel-list"));_("#all_view").css("visibility","visible");this.container.addClass(this.className("jcarousel-container"));var D=this.options.visible!=null?Math.ceil(this.clipping()/this.options.visible):null,A=this.list.children("li"),F=this;if(A.size()>0){var B=0,H=this.options.offset;A.each(function(){F.format(this,H++);B+=F.dimension(this,D)});this.list.css(this.wh,B+"px");if(!E||E.size==undefined)this.options.size=A.size()}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display","block");this.funcNext=function(){F.next()};this.funcPrev=function(){F.prev()};_(window).bind("resize",function(){F.reload()});if(this.options.initCallback!=null)this.options.initCallback(this,"init");this.setup()};var A=_.jcarousel;A.fn=A.prototype={jcarousel:"0.2.2"};A.fn.extend=A.extend=_.extend;A.fn.extend({setup:function(){this.first=null;this.last=null;this.prevFirst=null;this.prevLast=null;this.animating=false;this.timer=null;this.tail=null;this.inTail=false;if(this.locked)return;this.list.css(this.lt,this.pos(this.options.offset)+"px");var $=this.pos(this.options.start);this.prevFirst=this.prevLast=null;this.animate($,false)},reset:function(){this.list.empty();this.list.css(this.lt,"0px");this.list.css(this.wh,"0px");if(this.options.initCallback!=null)this.options.initCallback(this,"reset");this.setup()},reload:function(){if(this.tail!=null&&this.inTail)this.list.css(this.lt,A.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=false;if(this.options.reloadCallback!=null)this.options.reloadCallback(this);if(this.options.visible!=null){var C=this,B=Math.ceil(this.clipping()/this.options.visible),$=0,D=0;_("li",this.list).each(function(_){$+=C.dimension(this,B);if(_+1<C.first)D=$});this.list.css(this.wh,$+"px");this.list.css(this.lt,-D+"px")}this.scroll(this.first,false)},lock:function(){this.locked=true;this.buttons()},unlock:function(){this.locked=false;this.buttons()},size:function($){if($!=undefined){this.options.size=$;if(!this.locked)this.buttons()}return this.options.size},has:function(C,B){if(B==undefined||!B)B=C;for(var A=C;A<=B;A++){var $=this.get(A).get(0);if(!$||_.className.has($,"jcarousel-item-placeholder"))return false}return true},get:function($){return _(".jcarousel-item-"+$,this.list)},add:function(G,D){var B=this.get(G),_=0;if(B.length==0){var E,B=this.create(G),F=A.intval(G);while(E=this.get(--F))if(F<=0||E.length){F<=0?this.list.prepend(B):E.after(B);break}}else _=this.dimension(B);B.removeClass(this.className("jcarousel-item-placeholder"));typeof D=="string"?B.html(D):B.empty().append(D);var C=this.options.visible!=null?Math.ceil(this.clipping()/this.options.visible):null,$=this.dimension(B,C)-_;if(G>0&&G<this.first)this.list.css(this.lt,A.intval(this.list.css(this.lt))+$+"px");this.list.css(this.wh,A.intval(this.list.css(this.wh))+$+"px");return B},remove:function(B){var _=this.get(B);if(!_.length||(B>=this.first&&B<=this.last))return;var $=this.dimension(_);if(B<this.first)this.list.css(this.lt,A.intval(this.list.css(this.lt))+$+"px");_.remove();this.list.css(this.wh,A.intval(this.list.css(this.wh))-$+"px")},next:function(){this.stopAuto();if(this.tail!=null&&!this.inTail)this.scrollTail(false);else this.scroll(((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!=null&&this.last==this.options.size)?1:this.first+this.options.scroll)},prev:function(){this.stopAuto();if(this.tail!=null&&this.inTail)this.scrollTail(true);else this.scroll(((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!=null&&this.first==1)?this.options.size:this.first-this.options.scroll)},scrollTail:function($){if(this.locked||this.animating||!this.tail)return;var _=A.intval(this.list.css(this.lt));!$?_-=this.tail:_+=this.tail;this.inTail=!$;this.prevFirst=this.first;this.prevLast=this.last;this.animate(_)},scroll:function(_,$){if(this.locked||this.animating)return;this.animate(this.pos(_),$)},pos:function(K){if(this.locked||this.animating)return;if(this.options.wrap!="circular")K=K<1?1:(this.options.size&&K>this.options.size?this.options.size:K);var G=this.first>K,L=A.intval(this.list.css(this.lt)),$=this.options.wrap!="circular"&&this.first<=1?1:this.first,F=G?this.get($):this.get(this.last),J=G?$:$-1,B=null,H=0,N=false,_=0;while(G?--J>=K:++J<K){B=this.get(J);N=!B.length;if(B.length==0){B=this.create(J).addClass(this.className("jcarousel-item-placeholder"));F[G?"before":"after"](B)}F=B;_=this.dimension(B);if(N)H+=_;if(this.first!=null&&(this.options.wrap=="circular"||(J>=1&&(this.options.size==null||J<=this.options.size))))L=G?L+_:L-_}var O=this.clipping(),E=[],D=0,J=K,M=0,F=this.get(K-1);while(++D){B=this.get(J);N=!B.length;if(B.length==0){B=this.create(J).addClass(this.className("jcarousel-item-placeholder"));F.length==0?this.list.prepend(B):F[G?"before":"after"](B)}F=B;_=this.dimension(B);if(_==0){alert("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");return 0}if(this.options.wrap!="circular"&&this.options.size!==null&&J>this.options.size)E.push(B);else if(N)H+=_;M+=_;if(M>=O)break;J++}for(var Q=0;Q<E.length;Q++)E[Q].remove();if(H>0){this.list.css(this.wh,this.dimension(this.list)+H+"px");if(G){L-=H;this.list.css(this.lt,A.intval(this.list.css(this.lt))-H+"px")}}var C=K+D-1;if(this.options.wrap!="circular"&&this.options.size&&C>this.options.size)C=this.options.size;if(J>C){D=0,J=C,M=0;while(++D){B=this.get(J--);if(!B.length)break;M+=this.dimension(B);if(M>=O)break}}var P=C-D+1;if(this.options.wrap!="circular"&&P<1)P=1;if(this.inTail&&G){L+=this.tail;this.inTail=false}this.tail=null;if(this.options.wrap!="circular"&&C==this.options.size&&(C-D+1)>=1){var I=A.margin(this.get(C),!this.options.vertical?"marginRight":"marginBottom");if((M-I)>O)this.tail=M-O-I}while(K-->P)L+=this.dimension(this.get(K));this.prevFirst=this.first;this.prevLast=this.last;this.first=P;this.last=C;return L},animate:function(A,_){if(this.locked||this.animating)return;this.animating=true;var C=this,$=function(){C.animating=false;if(A==0)C.list.css(C.lt,0);if(C.options.wrap=="both"||C.options.wrap=="last"||C.options.size==null||C.last<C.options.size)C.startAuto();C.buttons();C.notify("onAfterAnimation")};this.notify("onBeforeAnimation");if(!this.options.animation||_==false){this.list.css(this.lt,A+"px");$()}else{var B=!this.options.vertical?{"left":A}:{"top":A};this.list.animate(B,this.options.animation,this.options.easing,$)}},startAuto:function($){if($!=undefined)this.options.auto=$;if(this.options.auto==0)return this.stopAuto();if(this.timer!=null)return;var _=this;this.timer=setTimeout(function(){_.next()},this.options.auto*1000)},stopAuto:function(){if(this.timer==null)return;clearTimeout(this.timer);this.timer=null},buttons:function(_,$){if(_==undefined||_==null){var _=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!="first")||this.options.size==null||this.last<this.options.size);if(!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!=null&&this.last>=this.options.size)_=this.tail!=null&&!this.inTail}if($==undefined||$==null){var $=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!="last")||this.first>1);if(!this.locked&&(!this.options.wrap||this.options.wrap=="last")&&this.options.size!=null&&this.first==1)$=this.tail!=null&&this.inTail}var A=this;this.buttonNext[_?"bind":"unbind"](this.options.buttonNextEvent,this.funcNext)[_?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",_?false:true);this.buttonPrev[$?"bind":"unbind"](this.options.buttonPrevEvent,this.funcPrev)[$?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",$?false:true);if(this.buttonNext.length>0&&(this.buttonNext[0].jcarouselstate==undefined||this.buttonNext[0].jcarouselstate!=_)&&this.options.buttonNextCallback!=null){this.buttonNext.each(function(){A.options.buttonNextCallback(A,this,_)});this.buttonNext[0].jcarouselstate=_}if(this.buttonPrev.length>0&&(this.buttonPrev[0].jcarouselstate==undefined||this.buttonPrev[0].jcarouselstate!=$)&&this.options.buttonPrevCallback!=null){this.buttonPrev.each(function(){A.options.buttonPrevCallback(A,this,$)});this.buttonPrev[0].jcarouselstate=$}},notify:function($){var _=this.prevFirst==null?"init":(this.prevFirst<this.first?"next":"prev");this.callback("itemLoadCallback",$,_);if(this.prevFirst!=this.first){this.callback("itemFirstInCallback",$,_,this.first);this.callback("itemFirstOutCallback",$,_,this.prevFirst)}if(this.prevLast!=this.last){this.callback("itemLastInCallback",$,_,this.last);this.callback("itemLastOutCallback",$,_,this.prevLast)}this.callback("itemVisibleInCallback",$,_,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",$,_,this.prevFirst,this.prevLast,this.first,this.last)},callback:function($,A,C,I,G,F,E){if(this.options[$]==undefined||(typeof this.options[$]!="object"&&A!="onAfterAnimation"))return;var B=typeof this.options[$]=="object"?this.options[$][A]:this.options[$];if(!_.isFunction(B))return;var D=this;if(I===undefined)B(D,C,A);else if(G===undefined)this.get(I).each(function(){B(D,this,I,C,A)});else for(var H=I;H<=G;H++)if(!(H>=F&&H<=E))this.get(H).each(function(){B(D,this,H,C,A)})},create:function($){return this.format("<li></li>",$)},format:function($,B){var A=_($).addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+B));A.attr("jcarouselindex",B);return A},className:function($){return $+" "+$+(!this.options.vertical?"-horizontal":"-vertical")},dimension:function(D,C){var E=D.jquery!=undefined?D[0]:D,B=!this.options.vertical?E.offsetWidth+A.margin(E,"marginLeft")+A.margin(E,"marginRight"):E.offsetHeight+A.margin(E,"marginTop")+A.margin(E,"marginBottom");if(C==undefined||B==C)return B;var $=!this.options.vertical?C-A.margin(E,"marginLeft")-A.margin(E,"marginRight"):C-A.margin(E,"marginTop")-A.margin(E,"marginBottom");_(E).css(this.wh,$+"px");return this.dimension(E)},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-A.intval(this.clip.css("borderLeftWidth"))-A.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-A.intval(this.clip.css("borderTopWidth"))-A.intval(this.clip.css("borderBottomWidth"))},index:function(_,$){if($==undefined)$=this.options.size;return Math.round((((_-1)/$)-Math.floor((_-1)/$))*$)+1}});A.extend({defaults:function(A){_.extend($,A)},margin:function(B,D){if(!B)return 0;var C=B.jquery!=undefined?B[0]:B;if(D=="marginRight"&&_.browser.safari){var $={"display":"block","float":"none","width":"auto"},F,E;_.swap(C,$,function(){F=C.offsetWidth});$["marginRight"]=0;_.swap(C,$,function(){E=C.offsetWidth});return E-F}return A.intval(_.css(C,D))},intval:function($){$=parseInt($);return isNaN($)?0:$}})})(jQuery)